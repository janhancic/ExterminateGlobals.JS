window.ExterminateGlobals=function(){function a(a,b){var c=Object.keys(b);return c=c.filter(function(b){return-1===a.indexOf(b)?!0:!1})}var b={},c=null,d=!1;null!=window.ExterminateGlobals&&window.ExterminateGlobals.TEST_MODE&&(d=!0),b.PRINT_FULL="full",b.PRINT_COMPACT="compatc";var e=function(a,b){this._ignoreKeys=null!=a?a.slice():[],this._monitoredObject=b||window,-1===this._ignoreKeys.indexOf("ExterminateGlobals")&&this._ignoreKeys.push("ExterminateGlobals"),this._startGlobals=[],this._unwantedGlobals=[],this._saveUnwantedGlobals=!1};return e.prototype.saveUnwantedGlobals=function(a){this._saveUnwantedGlobals=a},e.prototype.clearSavedUnwantedGlobals=function(){localStorage.removeItem("GlobalsCollector_unwanted_globals")},e.prototype.startCollecting=function(){this._startGlobals=[],this._unwantedGlobals=[],this._startGlobals=a(this._ignoreKeys,this._monitoredObject),this._insertBreakPoints()},e.prototype._insertBreakPoints=function(){var a=localStorage.getItem("GlobalsCollector_unwanted_globals");null!=a&&a.split(",").forEach(function(a){Object.defineProperty(this._monitoredObject,a,{set:function(){}})}.bind(this))},e.prototype.collect=function(){var b=a(this._ignoreKeys,this._monitoredObject),c=b.length-this._startGlobals.length;return 0===c?[]:(this._unwantedGlobals=b.filter(function(a){return-1===this._startGlobals.indexOf(a)?!0:!1}.bind(this)),this._storeUnwantedGlobals(),this._unwantedGlobals)},e.prototype._storeUnwantedGlobals=function(){this._saveUnwantedGlobals!==!1&&localStorage.setItem("GlobalsCollector_unwanted_globals",this._unwantedGlobals.join(","))},e.prototype.getMonitoredObject=function(){return this._monitoredObject},e.prototype.getIgnoredKeys=function(){return this._ignoreKeys.slice()},e.prototype.getUnwantedGlobals=function(){return this._unwantedGlobals.slice()},e.prototype.print=function(a){return a=a||b.PRINT_FULL,console.group("==========> ExterminateGlobals.JS <=========="),console.log("Report for object: ",this._monitoredObject),0===this._unwantedGlobals.length?(console.info("No unwanted globals found! Nothing to exterminate :("),console.groupEnd(),void 0):(console.info("Found "+this._unwantedGlobals.length+" unwanted globals! Exterminate! Exterminate! Exterminate!"),console.info("List of unwanted globals:"),this._unwantedGlobals.forEach(function(c){a===b.PRINT_FULL?console.log(c+":",this._monitoredObject[c]):console.log(c)}.bind(this)),console.groupEnd(),void 0)},b.startCollecting=function(a,b){if(null!==c){var d="Globals collection already in progress. Call ExterminateGlobals.collect() before calling ";throw d+="ExterminateGlobals.startCollecting() again.",new Error(d)}c=new e(a,b),c.startCollecting()},b.collect=function(a){if(null===c)throw new Error("Call ExterminateGlobals.startCollecting() before calling ExterminateGlobals.collect().");c.collect(),c.print(a),c=null},b.GlobalsCollector=e,d===!0&&(b.getHelperGlobalCollector=function(){return c},b.setHelperGlobalCollector=function(a){c=a},b.resetConvenienceFunctions=function(){c=null}),b}();